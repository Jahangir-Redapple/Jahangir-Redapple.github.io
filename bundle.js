(()=>{"use strict";let e=new class{constructor(){this.urlParams=new URLSearchParams(window.location.search),this.timerValue=this.urlParams.get("timer"),this.gameID=this.urlParams.get("game_id")}IsUrlParamsMissing(){return!this.timerValue}PostGameQuitToParent(e,t){console.log("PostGameQuitToParent",e,t,this.gameID),this.gameID}PostGameFrequencyToParent(e){console.log("PostGameFrequencyToParent",e,this.gameID),this.gameID}PostGamePlayTimeToParent(e,t){console.log("PostGamePlayTimeToParent",e,t,this.gameID),this.gameID}PostGameFinishToParent(e){console.log(" Post Game Over To Parent ",e)}},t=new class{constructor(){this.game=null,this.scaleFactor=null,this.isMobile=null,this.currentAspectRatio=null,this.originalAspectRatio=null,this.currentRatio=null,this.timeToEnd=null,this.activeScene=null,this.gameStartTime=null,this.playClicked=null,this.score=0,this.gameOptions={rotationSpeed:3,maxRotationSpeed:10,rotationVariation:2,changeTime:2500,minAngle:12,throwSpeed:150}}},i=new class{constructor(){this.bgMusic=null,this.buttonClickSound=null,this.obstacleCollideSound=null,this.knifeAttachSound=null}CreateSound(){this.bgMusic=t.game.sound.add("bg_music"),this.buttonClickSound=t.game.sound.add("button_click_sound"),this.knifeAttachSound=t.game.sound.add("knife_attach_sound"),this.obstacleCollideSound=t.game.sound.add("obstacle_collide_sound")}PlayBgMusic(){null==localStorage.getItem("hit_it_right_is_sound_on")&&localStorage.setItem("hit_it_right_is_sound_on",1),"1"==localStorage.getItem("hit_it_right_is_sound_on")&&(this.bgMusic.stop(),this.bgMusic.play(),this.bgMusic.loop=!0,this.bgMusic.volume=.1)}StopBgMusic(){this.bgMusic.stop()}PlayButtonClickSound(){null==localStorage.getItem("hit_it_right_is_sound_on")&&localStorage.setItem("hit_it_right_is_sound_on",1),"1"==localStorage.getItem("hit_it_right_is_sound_on")&&this.buttonClickSound.play()}PlayKnifeAttachSound(){null==localStorage.getItem("hit_it_right_is_sound_on")&&localStorage.setItem("hit_it_right_is_sound_on",1),"1"==localStorage.getItem("hit_it_right_is_sound_on")&&this.knifeAttachSound.play()}PlayObstacleCollideSound(){null==localStorage.getItem("hit_it_right_is_sound_on")&&localStorage.setItem("hit_it_right_is_sound_on",1),"1"==localStorage.getItem("hit_it_right_is_sound_on")&&this.obstacleCollideSound.play()}},s=new class{constructor(){}SpriteSettingsControl(e,t,i,s,a=null,n=null,o=null,r=null,h=!1,l=null,d=null,c=null,g=null){var u=e.add.image(t,i,s);return null!=a&&null!=n?u.setOrigin(a,n):u.setOrigin(0,0),null!=o&&null!=r&&u.setScale(o,r),h&&u.setInteractive({useHandCursor:!0}),null!=l&&u.on("pointerdown",l,e),null!=c&&u.on("pointerover",c),null!=g&&u.on("pointerout",g),null!=d&&u.on("pointerup",d,e),u}ButtonScaleTween(e,t,i){e.add.tween({targets:[t],scaleX:.9*i,scaleY:.9*i,ease:"Linear",duration:50,onComplete:this.onCompleteHandler,onCompleteParams:[t,i]})}onCompleteHandler(e,t,i,s){this.parent.scene.add.tween({targets:[i],scaleX:1*s,scaleY:1*s,ease:"Linear",duration:50})}getScale(e,t,i,s){let a=i/e,n=s/t;return a<n?a:n}getScaleX(e,t){return t/e}getScaleY(e,t){return t/e}};class a extends Phaser.Scene{constructor(){super("PreloadScene"),this.progressBar=null,this.loadingText=null,this.fonts={Poppins_Bold:null}}preload(){}create(){t.activeScene="preload",this.game.events.on("resize",this.resize,this),this.loadArray=[];const e=document.getElementById("splash_bg"),i=document.getElementById("logo"),s=document.getElementById("progress_base"),a=document.getElementById("progress_bar");this.loadArray.push(e,i,s,a);for(let e=0;e<this.loadArray.length;e++){const t=this.loadArray[e];t.complete?this.loadHTMLImage(t):t.onload=()=>this.loadHTMLImage(t)}if(this.loadingText=this.add.text(Math.round(t.game.config.width/2),Math.round(t.game.config.height/1.2),"Loading: ",{fontFamily:"Poppins_Bold",fontSize:"46px",fill:"#FFF",fontStyle:"normal",align:"center"}).setOrigin(.5,.5).setScale(t.scaleFactor,t.scaleFactor),Math.round(t.game.config.width-100),Math.round(t.game.config.width-100),this.LoadFonts(),this.LoadAssests(),window.innerWidth>=window.innerHeight/1.7777777){let e=window.innerHeight,t=e/1.77777777778;this.resize(t,e,window.innerWidth/2-t/2)}else{let e=window.innerWidth,t=window.innerHeight;this.resize(e,t,0)}}loadHTMLImage(e){let t,i;window.innerWidth>=window.innerHeight/1.7777777?(t=window.innerHeight,i=t/1.77777777778):(i=window.innerWidth,t=window.innerHeight);let a=s.getScale(1080,1920,i,t);if(e.id){const s=e.id;this.textures.exists(s)||this.textures.addImage(s,e),"splash_bg"===s?(this.splashBg=this.add.image(0,0,"splash_bg").setOrigin(0),this.ResizeSplashBg(i,t)):"logo"===s?(this.splashLogo=this.add.image(0,0,"logo").setOrigin(.5),this.ResizeSplashLogo(i,t,a)):"progress_base"===s?(this.progressBase=this.add.image(0,0,"progress_base").setOrigin(0),this.ResizeProgressBase(i,t,a)):"progress_bar"===s&&(this.progressBar=this.add.image(0,0,"progress_bar").setOrigin(0),this.progressBar.setCrop(0,0,0,this.progressBar.height),this.ResizeProgressBar(i,t,a))}else console.warn("Element does not have an ID:",e)}LoadFonts(){console.log(" load fonts ");let e=Object.getOwnPropertyNames(this.fonts);e.forEach(((t,i)=>{let s=i>=e.length-1;this.fonts[t]=new FontFaceObserver(t),this.fonts[t].load().then(this.FontLoadSuccess.bind(this,t,s),this.FontLoadError.bind(this,t))}))}FontLoadSuccess(i,s){console.log("  FontLoadSuccess"),s&&(console.log(" load fonts  FontLoadSuccess"),t.timeToEnd=e.timerValue,this.LoadAssests())}FontLoadError(e){}LoadAssests(){this.load.on("progress",this.LoadProgress,this),this.load.on("complete",this.OnComplete,{scene:this.scene}),this.load.image("menu_character_knife","assets/images/menu/menu_character_knife.png"),this.load.image("character_shadow","assets/images/menu/character_shadow.png"),this.load.spritesheet("menu_character","assets/images/menu/menu_character_spriteshet.png",{frameWidth:527,frameHeight:532}),this.load.image("character_glow","assets/images/menu/character_glow.png"),this.load.image("play_button","assets/images/menu/play_button.png"),this.load.image("title","assets/images/menu/title.png"),this.load.image("title_knife","assets/images/menu/title_knife.png"),this.load.image("gameplay_bg","assets/images/gameplay/gameplay_bg.png"),this.load.image("back_button","assets/images/gameplay/back_button.png"),this.load.image("sound_on","assets/images/gameplay/sound_on.png"),this.load.image("sound_off","assets/images/gameplay/sound_off.png"),this.load.image("knife","assets/images/gameplay/knife.png"),this.load.spritesheet("target","assets/images/gameplay/target.png",{frameWidth:375,frameHeight:381}),this.load.spritesheet("target_break","assets/images/gameplay/target_break.png",{frameWidth:609,frameHeight:1075}),this.load.image("knife_stand","assets/images/gameplay/knife_stand.png"),this.load.image("knife_stand_knife_base","assets/images/gameplay/knife_stand_knife_base.png"),this.load.image("stand_knife","assets/images/gameplay/stand_knife.png"),this.load.image("obstacle_0","assets/images/gameplay/obstacle_0.png"),this.load.image("obstacle_1","assets/images/gameplay/obstacle_1.png"),this.load.image("quit_base","assets/images/popup/quit/quit_base.png"),this.load.image("yes_button","assets/images/popup/quit/yes_button.png"),this.load.image("no_button","assets/images/popup/quit/no_button.png"),this.load.spritesheet("hand","assets/images/popup/quit/hand.png",{frameWidth:256,frameHeight:256}),this.load.image("one_pixel_white","assets/images/one_pixel_white.png"),this.load.image("one_pixel_black","assets/images/one_pixel_black.png"),this.load.image("menu_btn","assets/images/popup/gameover/menu_btn.png"),this.load.image("popup_base","assets/images/popup/gameover/popup_base.png"),this.load.image("replay_btn","assets/images/popup/gameover/replay_btn.png"),this.load.audio("button_click_sound","assets/sounds/button_click_sound.mp3"),this.load.audio("knife_attach_sound","assets/sounds/knife_attach_sound.mp3"),this.load.audio("obstacle_collide_sound","assets/sounds/obstacle_collide_sound.mp3"),this.load.audio("bg_music","assets/sounds/bg_music.mp3"),this.load.start()}CreateTimer(){this.TimedEvent=this.time.addEvent({delay:1e3,callback:this.UpdateTime,callbackScope:this,loop:!0})}UpdateTime(){if(t.timeToEnd>0)t.timeToEnd--,this.DisplayTimeFormat(t.timeToEnd);else{if("Android"==getMobileOperatingSystem()&&(sendMessage("The Game End.................................."),sendMessage("0")),"iOS"==getMobileOperatingSystem()){let e={score:"0"},t=JSON.stringify(e);window.webkit.messageHandlers.jsHandler.postMessage(t),window.webkit.messageHandlers.jsHandler.postMessage("The Game End.............")}this.TimedEvent.remove()}}DisplayTimeFormat(e){let t=parseInt(e/60,10),i=parseInt(e%60,10);t=t<10?"0"+t:t,i=i<10?"0"+i:i,this.timeValueText.setText(t+":"+i)}LoadProgress(e){this.progressBar.setCrop(0,0,this.progressBar.width*e,this.progressBar.height),e*=100,this.loadingText.setText("Loading: "+parseInt(e)+" %")}OnComplete(){i.CreateSound(),setTimeout((()=>{t.game.scene.stop("PreloadScene"),this.scene.start("TitleScene")}),1e3)}ResizeSplashBg(e,t,i){this.splashBg.setDisplaySize(e,t)}ResizeSplashLogo(e,t,i){this.splashLogo.setScale(i),this.splashLogo.setPosition(e/2,650*i)}ResizeProgressBase(e,t,i){this.progressBase&&(this.progressBase.setScale(i),this.progressBase.setPosition(e/2-250*i,t-360*i))}ResizeProgressBar(e,t,i){this.progressBar&&(this.progressBar.setScale(i),this.progressBar.setPosition(this.progressBase.x,this.progressBase.y))}resize(e,i,a){if("preload"!=t.activeScene)return;let n=s.getScale(1080,1920,e,i);this.ResizeSplashBg(e,i,n),this.ResizeSplashLogo(e,i,n),this.ResizeProgressBase(e,i,n),this.ResizeProgressBar(e,i,n),this.loadingText.setScale(n),this.loadingText.setPosition(e/2,i-250*n);const o=this.cameras.main;o.x=a,o.setViewport(a,0,e,i)}}class n extends Phaser.Scene{constructor(){super("TitleScene"),this.menuContainerX=0,this.scaleBeforeResize=0,this.characterX=0,this.characterY=0,this.titleX=200,this.titleY=450,this.titleKnifeX=50,this.titleKnifeY=2e3,this.finalKnifeX=0,this.finalKnifeY=600,this.playButtonX=0,this.playButtonY=620,this.titleKnifePos={x:0,y:-100},this.titlePos={x:0,y:0},this.characterPos={x:650,y:625},this.characterKnifePos={x:190,y:850},this.hasAnime=!1,this.titleScale=.1}create(){if(t.activeScene="title",this.game.events.on("resize",this.resize,this),this.menuBg=this.add.image(0,0,"splash_bg").setOrigin(0),this.titleKnife=this.add.image(0,0,"title_knife").setOrigin(.5,1),this.titleKnife.setAlpha(0),this.title=this.add.image(0,0,"title").setOrigin(.5),this.title.setAlpha(0),this.characterGlow=this.add.image(0,0,"character_glow").setOrigin(.5),this.characterShadow=this.add.image(0,0,"character_shadow").setOrigin(.5),this.character=this.add.sprite(0,0,"menu_character").setOrigin(.5),this.anims.create({key:"throw_knife",frameRate:30,frames:this.anims.generateFrameNumbers("menu_character",{start:0,end:12})}),this.characterKnife=this.add.image(0,0,"menu_character_knife").setOrigin(.5),this.characterKnife.setAlpha(0),this.playButton=this.add.image(0,0,"play_button").setOrigin(.5),this.playButton.setAlpha(0),this.playButton.setInteractive({useHandCursor:!0}),this.playButton.on("pointerdown",this.PlayButtonPressed,this),this.playButton.on("pointerup",this.PlayButtonReleased,this),Math.round(t.game.config.width-100),Math.round(t.game.config.width-100),t.timeToEnd,window.innerWidth>=window.innerHeight/1.7777777){let e=window.innerHeight,t=e/1.77777777778;this.playButtonY=e/2,this.resize(t,e,window.innerWidth/2-t/2)}else{let e=window.innerWidth,t=window.innerHeight;this.playButtonY=t/2,this.resize(e,t,0)}this.ShowCharacter()}CreateTimer(){this.TimedEvent=this.time.addEvent({delay:1e3,callback:this.UpdateTime,callbackScope:this,loop:!0})}UpdateTime(){t.timeToEnd>0&&(t.timeToEnd--,this.DisplayTimeFormat(t.timeToEnd))}DisplayTimeFormat(e){let t=parseInt(e/60,10),i=parseInt(e%60,10);t=t<10?"0"+t:t,i=i<10?"0"+i:i,this.timeValueText.setText(t+":"+i)}CallTheScoreSendAPI(){try{if("Android"==getMobileOperatingSystem())sendMessage("The Game End.................................."),sendMessage("0");else if("iOS"==getMobileOperatingSystem()){var s=JSON.stringify({score:"0"});window.webkit.messageHandlers.jsHandler.postMessage(s),window.webkit.messageHandlers.jsHandler.postMessage("The Game End.............")}}catch(e){console.log("err: ",e)}i.StopBgMusic(),null!=this.TimedEvent&&this.TimedEvent.remove(),t.timeToEnd=e.timerValue}ShowCharacter(){this.tweens.add({targets:[this.character],x:this.characterX,ease:"Bounce.Out",duration:300,delay:100,onComplete:()=>{this.characterPos.x=100,this.ShowTitle()},onCompleteScope:this})}ShowTitle(){let e,t;window.innerWidth>=window.innerHeight/1.7777777?(t=window.innerHeight,e=t/1.77777777778):(e=window.innerWidth,t=window.innerHeight);let i=s.getScale(1080,1920,e,t);this.title.setAlpha(1),this.tweens.add({targets:[this.title],x:e/2,y:t/2-450*i,scaleX:.8*i,scaleY:.8*i,ease:"Back.easeInOut",duration:500,onComplete:()=>{this.titleScale=.8,this.hasAnime=!0,this.character.play("throw_knife"),this.character.on("animationcomplete",this.onCompleteCharacterAnimation,this)},onCompleteScope:this})}onCompleteCharacterAnimation(e,t){this.characterKnife.setAlpha(1),this.ThrowCharacterKnife()}ThrowCharacterKnife(){let e=s.getScaleY(1920,window.innerHeight);this.characterKnife.setVisible(!0),this.tweens.add({targets:[this.characterKnife],y:-200*e,rotation:15,ease:"Sine.easeInOut",duration:600,callbackScope:this,onComplete:function(e){this.characterKnife.setAlpha(0),this.ShowTitleKnife()}})}ShowTitleKnife(){this.titleKnife.setAlpha(1);let e=window.innerHeight,t=e/1.77777777778,i=s.getScale(1080,1920,t,e);this.tweens.add({targets:[this.titleKnife],x:this.title.x-10*i,y:this.title.y-25*i,ease:"Back.easeInOut",duration:400,callbackScope:this,onComplete:()=>{this.finalKnifeX=this.title.x-10,this.finalKnifeY=this.title.y-100,this.titleX=0,this.titleY=950,this.titleKnifeX=10,this.titleKnifeY=25}}),setTimeout((()=>{this.JerkTheTitle()}),230)}JerkTheTitle(){this.tweens.add({targets:[this.title],y:this.title.y+20,ease:"Back.easeIn",duration:150,yoyo:!0,onCompleteScope:this,onComplete:function(e){this.ShowPlayButton()}})}ShowPlayButton(){let e=window.innerHeight,t=e/1.77777777778,i=s.getScale(1080,1920,t,e);this.tweens.add({targets:[this.playButton],y:e-150*i,alpha:1,ease:"Back.easeInOut",duration:800,onCompleteScope:this,onComplete:()=>{this.playButtonY=150}})}PlayButtonPressed(){let e=window.innerHeight,t=e/1.77777777778,a=s.getScale(1080,1920,t,e);s.ButtonScaleTween(this,this.playButton,a),s.ButtonScaleTween(this,this.playText,a),i.PlayButtonClickSound()}PlayButtonReleased(){t.playClicked+=1,e.PostGameFrequencyToParent(t.playClicked),setTimeout((()=>{t.game.scene.stop("TitleScene"),this.scene.start("GameScene")}),100)}resize(e,i,a){if("title"!=t.activeScene)return;const n=this.cameras.main;n.x=a;let o=s.getScale(1080,1920,e,i),r=s.getScaleY(1920,i);this.menuBg.setDisplaySize(e,i),this.finalKnifeX=this.title.x-10*o,this.characterX=e/2-100*o,this.characterY=i-625*r,this.characterGlow.setScale(o),this.characterGlow.setPosition(e/2,i-450*r),this.character.setScale(o),this.character.setPosition(e/2-this.characterPos.x*o,this.characterGlow.y-200*o),this.titlePos.x=e/2-this.titleX*o,this.titlePos.y=this.characterGlow.y-this.titleY*o,this.title.setScale(this.titleScale*o),this.hasAnime?this.title.setPosition(e/2,510*o):this.title.setPosition(this.titlePos.x,this.titlePos.y),this.characterShadow.setScale(o),this.characterShadow.setPosition(this.character.x,this.character.y+200*o),this.characterKnife.setScale(o),this.characterKnife.setPosition(e/2-this.characterKnifePos.x*o,i-this.characterKnifePos.y*r),this.titleKnifePos.x=this.title.x-this.titleKnifeX*o,this.titleKnifePos.y=this.title.y-this.titleKnifeY*o,this.titleKnife.setScale(o),this.titleKnife.setPosition(this.titleKnifePos.x,this.titleKnifePos.y),this.playButtonX=e/2,this.playButton.setScale(o),this.playButton.setPosition(this.playButtonX,i-this.playButtonY*o),this.scaleBeforeResize=o,n.setViewport(a,0,e,i)}}const o=class{constructor(e){this.scene=e,this.CreateGameOverPopup(0)}CreateGameOverPopup(e){this.gameOverPopupGroup=this.scene.add.group(),this.overlay=this.scene.add.image(0,0,"one_pixel_black").setOrigin(0),this.overlay.alpha=.6,this.overlay.setInteractive({useHandCursor:!0}),this.overlay.on("pointerup",this.OverlayPressed,this),this.base=this.scene.add.image(0,0,"popup_base").setOrigin(.5),this.yourScoreText=this.scene.add.text(0,0,"YOUR SCORE : ",{fontFamily:"Poppins_Bold",fontSize:"60px",fill:"#fff",fontStyle:"bold",align:"left"}).setOrigin(.5),this.replayButton=this.scene.add.image(0,0,"replay_btn").setOrigin(.5),this.replayButton.setInteractive({useHandCursor:!0}),this.replayButton.on("pointerdown",this.ReplayButtonPressed,this),this.replayButton.on("pointerup",this.ReplayButtonReleased,this),this.menuButton=this.scene.add.image(0,0,"menu_btn").setOrigin(.5),this.menuButton.setInteractive({useHandCursor:!0}),this.menuButton.setInteractive({useHandCursor:!0}),this.menuButton.on("pointerdown",this.MenuButtonPressed,this),this.menuButton.on("pointerup",this.MenuButtonReleased,this),this.gameOverPopupGroup.add(this.overlay),this.gameOverPopupGroup.add(this.base),this.gameOverPopupGroup.add(this.yourScoreText),this.gameOverPopupGroup.add(this.replayButton),this.gameOverPopupGroup.add(this.menuButton),this.gameOverPopupGroup.setDepth(2),this.gameOverPopupGroup.setVisible(!1)}ShowPopup(e){this.scene.add.tween({targets:[e],alpha:1,ease:"Linear",duration:300})}ShowGameOverPopup(e){this.yourScoreText.setText("YOUR SCORE : "+e),this.gameOverPopupGroup.setVisible(!0)}HideGameOverPopup(){this.gameOverPopupGroup.setVisible(!1)}ReplayButtonPressed(){let e=s.getScale(1080,1920,window.innerWidth,window.innerHeight);s.ButtonScaleTween(this.scene,this.replayButton,e),i.PlayButtonClickSound()}ReplayButtonReleased(){setTimeout((()=>{this.HideGameOverPopup(),this.scene.scene.restart("GameScene")}),100)}MenuButtonPressed(){let e=s.getScale(1080,1920,window.innerWidth,window.innerHeight);s.ButtonScaleTween(this.scene,this.menuButton,e),i.PlayButtonClickSound()}MenuButtonReleased(){setTimeout((()=>{this.HideGameOverPopup(),t.game.scene.stop("GameScene"),t.game.scene.start("TitleScene")}),100)}OverlayPressed(){}Resize(e,t,i){let a=s.getScale(1080,1920,e,t);this.overlay.setDisplaySize(e,t),this.base.setScale(a),this.base.setPosition(e/2,t/2),this.yourScoreText.setScale(a),this.yourScoreText.setPosition(this.base.x,this.base.y),this.replayButton.setScale(a),this.replayButton.setPosition(this.base.x+185*a,this.base.y+225*a),this.menuButton.setScale(a),this.menuButton.setPosition(this.base.x-185*a,this.base.y+225*a)}},r=new class{constructor(){this.listeners={},this.setupMessageListener(),this.setupFlutterListener()}getMobileOperatingSystem(){const e=navigator.userAgent||navigator.vendor||window.opera;return/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"Browser"}sendMessageForAnalytics(e,t){const i=this.getMobileOperatingSystem(),s=JSON.stringify(t);switch(i){case"Android":try{console.log(`Android - ${e} called`,s),window.parent.postMessage({eventName:e,data:s},"*"),window.flutter_inappwebview?window.flutter_inappwebview.callHandler(e,s):JSBridge[e](s)}catch(e){console.error(`Android JS Bridge error: ${e}`)}break;case"iOS":try{console.log(`iOS - ${e} called`,s),window.parent.postMessage({eventName:e,data:s},"*");const t={[e]:s};window.flutter_inappwebview?window.flutter_inappwebview.callHandler(e,JSON.stringify(t)):window.webkit.messageHandlers.jsHandler.postMessage(JSON.stringify(t))}catch(e){console.error(`iOS JS Bridge error: ${e}`)}break;default:try{console.log(`Browser - ${e} called`,s),window.parent.postMessage({eventName:e,data:s},"*"),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler(e,s)}catch(e){console.error(`Browser JS Bridge error: ${e}`)}}}emit(e,t){console.log(`${e} =====> ${JSON.stringify(t)}`),this.sendMessageForAnalytics(e,t)}listen(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push((i=>{try{const e="string"==typeof i?JSON.parse(i):i;t(e)}catch(t){console.error(`Error parsing data for event "${e}":`,t)}}))}trigger(e,t){this.listeners[e]&&this.listeners[e].forEach((e=>e(t)))}setupMessageListener(){window.addEventListener("message",(e=>{const{eventName:t,data:i}=e.data||{};if(t&&this.listeners[t])try{const e="string"==typeof i?JSON.parse(i):i;console.log(`Received data from message listener: ${t} -`,e),this.trigger(t,e)}catch(e){console.error(`Error parsing incoming message data for event "${t}":`,e)}}))}setupFlutterListener(){window.flutter_inappwebview?(console.log("Flutter WebView is ready."),window.flutter_inappwebview.callHandler("JSReady",{status:"JS SDK Ready"}),window.addEventListener("flutterInAppWebViewPlatformReady",(()=>{console.log("Flutter WebView Platform is ready.")}))):console.warn("Flutter WebView is not detected."),window.addEventListener("message",(e=>{const{eventName:t,data:i}=e.data||{};if(t&&this.listeners[t])try{const e="string"==typeof i?JSON.parse(i):i;console.log(`Received data from Flutter: ${t} -`,e),this.trigger(t,e)}catch(e){console.error(`Error parsing data from Flutter for event "${t}":`,e)}}))}},h=new class{GameLoadingStarted(){const t={game_id:e.gameID,game_type:"HTML5"};r.emit("GameLoadingStarted",t)}GameLoadingCompleted(){const t={game_id:e.gameID,game_type:"HTML5"};r.emit("GameLoadingCompleted",t)}GamePlayStarted(){const t={game_id:e.gameID,game_type:"HTML5"};r.emit("GamePlayStarted",t)}GamePlayStopped(t){const i={game_id:e.gameID,game_type:"HTML5",gameplay_time:t};r.emit("GamePlayStopped",i)}UpdateGameLevel(){const t={game_id:e.gameID,game_type:"HTML5"};r.emit("UpdateGameLevel",t)}GamePlayPaused(){const t={game_id:e.gameID,game_type:"HTML5"};r.emit("GamePlayPaused",t)}GamePlayResumed(){const t={game_id:e.gameID,game_type:"HTML5"};r.emit("GamePlayResumed",t)}InterimBreak(){const t={game_id:e.gameID,game_type:"HTML5"};r.emit("InterimBreak",t)}GameScoreUpdate(t,i){const s={gameplay_time:t,game_id:e.gameID,game_type:"HTML5",score:i};r.emit("GameScoreUpdate",s)}GameStateUpdate(t,i){const s={game_id:e.gameID,game_type:"HTML5",grid:t,sublevel:i};r.emit("GameStateUpdate",s)}GameStateFetch(){r.listen("GameStateFetch",(e=>{Constant.game.events.emit("gamestateupdate",e)}))}GameScoreFetch(){r.listen("GameScoreFetch",(e=>{Constant.game.events.emit("gamescoreupdate",e)}))}DebugMode(){const t={event:"DebugMode",game_id:e.gameID,game_type:"HTML5"};r.emit("DebugMode",t)}AdStarted(){const t={event:"AdStarted",game_id:e.gameID,game_type:"HTML5"};r.emit("AdStarted",t)}AdCompleted(){const t={event:"AdCompleted",game_id:e.gameID,game_type:"HTML5"};r.emit("AdCompleted",t)}},l=class{constructor(e){this.scene=e,this.CreateQuitPopup()}CreateQuitPopup(){this.quitPopupGroup=this.scene.add.group(),this.overlay=this.scene.add.image(0,0,"one_pixel_black").setOrigin(0),this.overlay.alpha=.6,this.overlay.setInteractive({useHandCursor:!0}),this.overlay.on("pointerup",this.OverlayPressed,this),this.base=this.scene.add.image(0,0,"quit_base").setOrigin(.5),this.quitText=this.replayText=this.scene.add.text(0,0,"DO YOU WANT TO QUIT ?",{fontFamily:"Poppins_Bold",fontSize:"56px",fill:"#fff",fontStyle:"bold",align:"center"}).setOrigin(.5),this.yesButton=this.scene.add.image(0,0,"yes_button").setOrigin(.5),this.yesButton.setInteractive({useHandCursor:!0}),this.yesButton.on("pointerdown",this.YesButtonPressed,this),this.yesButton.on("pointerup",this.YesButtonReleased,this),this.noButton=this.scene.add.image(0,0,"no_button").setOrigin(.5),this.noButton.setInteractive({useHandCursor:!0}),this.noButton.on("pointerdown",this.NoButtonPressed,this),this.noButton.on("pointerup",this.NoButtonReleased,this),this.quitPopupGroup.add(this.overlay),this.quitPopupGroup.add(this.base),this.quitPopupGroup.add(this.quitText),this.quitPopupGroup.add(this.yesButton),this.quitPopupGroup.add(this.noButton),this.quitPopupGroup.setDepth(2),this.quitPopupGroup.setVisible(!1)}OverlayPressed(){}YesButtonPressed(){let e=s.getScale(1080,1920,window.innerWidth,window.innerHeight);s.ButtonScaleTween(this.scene,this.yesButton,e),i.PlayButtonClickSound()}YesButtonReleased(){const e=Date.now()-t.gameStartTime;h.GamePlayStopped(e/1e3),setTimeout((()=>{t.game.scene.stop("GameScene"),t.game.scene.start("TitleScene"),i.StopBgMusic()}),300)}NoButtonPressed(){let e=s.getScale(1080,1920,window.innerWidth,window.innerHeight);s.ButtonScaleTween(this.scene,this.noButton,e),i.PlayButtonClickSound()}NoButtonReleased(){this.HideQuitPopup()}ShowQuitPopup(){console.log("show",this.quitPopupGroup),this.quitPopupGroup.setVisible(!0),this.scene.add.tween({targets:[this.quitPopupGroup],alpha:1,ease:"Linear",duration:300})}HideQuitPopup(){this.scene.add.tween({targets:[this.quitPopupGroup],alpha:0,ease:"Linear",duration:300,onComplete:this.onHideQuitPopup,onCompleteScope:this})}onHideQuitPopup(){this.quitPopupGroup.setVisible(!1)}Resize(e,t,i){let a=s.getScale(1080,1920,e,t);this.overlay.setDisplaySize(e,t),this.base.setScale(a),this.base.setPosition(e/2,t/2),this.quitText.setScale(a),this.quitText.setPosition(this.base.x,this.base.y-100*a),this.yesButton.setScale(a),this.yesButton.setPosition(this.base.x-185*a,this.base.y+100*a),this.noButton.setScale(a),this.noButton.setPosition(this.base.x+185*a,this.base.y+100*a)}},d=class{constructor(e){this.scene=e}CreateInstructionPopup(){this.instructionPopupGroup=this.scene.add.group(),this.overlay=this.scene.add.image(0,0,"one_pixel_black").setOrigin(0),this.overlay.alpha=.6,this.overlay.setInteractive({useHandCursor:!0}),this.overlay.on("pointerup",this.OverlayPressed,this),this.tapText=this.scene.add.text(0,0,"TAP TO THROW THE KNIFE",{fontFamily:"Poppins_Bold",fontSize:"65px",fill:"#fff",fontStyle:"bold",align:"center"}).setOrigin(.5),this.hand=this.scene.add.sprite(0,0,"hand").setOrigin(.5),this.scene.anims.create({key:"hand_tap",frameRate:15,repeat:-1,frames:this.scene.anims.generateFrameNumbers("hand",{start:0,end:11})}),setTimeout((()=>{this.hand.play("hand_tap")}),500),this.instructionPopupGroup.add(this.overlay),this.instructionPopupGroup.add(this.tapText),this.instructionPopupGroup.add(this.hand),this.instructionPopupGroup.setDepth(2)}OverlayPressed(){this.HideInstructionPopup()}YesButtonPressed(){s.ButtonScaleTween(this.scene.scene,this.scene.scene.quitPopup.yesButton,t.scaleFactor),i.PlayButtonClickSound()}YesButtonReleased(){setTimeout((()=>{t.game.scene.stop("GameScene"),t.game.scene.start("TitleScene"),i.StopBgMusic()}),100)}NoButtonPressed(){s.ButtonScaleTween(this.scene.scene,this.scene.scene.quitPopup.noButton,t.scaleFactor),i.PlayButtonClickSound()}NoButtonReleased(){this.scene.scene.instructionPopup.HideInstructionPopup()}HideInstructionPopup(){this.scene.add.tween({targets:this.instructionPopupGroup,alpha:0,ease:"Linear",duration:300,onComplete:this.onHideInstructionPopup,onCompleteScope:this})}onHideInstructionPopup(){this.instructionPopupGroup.setVisible(!1)}Resize(e,t,i){let a=s.getScale(1080,1920,e,t);this.overlay.setDisplaySize(e,t),this.tapText.setScale(a),this.tapText.setPosition(e/2,t-550*a),this.hand.setScale(a),this.hand.setPosition(e/2,t-330*a)}};let c="";const g=class{constructor(e){this.scene=e}GetUrl(e){return"http://13.232.173.115:3001"+e}PostScore(e){let t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(c=JSON.parse(this.responseText))},t.open("POST",this.GetUrl("/update-score"),!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("score="+e)}};class u{constructor({gameId:e,zoneId:t,accountId:i,injectionElementId:s}){this.options={gameId:e,zoneId:t,accountId:i,injectionElementId:s,adStatusCallbackFn:this._handleAdStatus.bind(this),adErrorCallbackFn:this._handleAdError.bind(this)},this.application=null,this.statusListeners=[],this.errorListeners=[],this.initialize()}initialize(){this.application=new Application(this.options),console.log("AdSdk: Application initialized",this.application),this.application.initialize()}showAd(){this.application?(console.log("AdSdk: Showing ad",this.application),this.application.openPlayer(this.options)):console.error("AdSdk: Application not initialized.")}onStatus(e){"function"==typeof e&&this.statusListeners.push(e)}onError(e){"function"==typeof e&&this.errorListeners.push(e)}_handleAdStatus(e){console.log("AdSdk: Ad status -",e),this.statusListeners.forEach((t=>t(e)))}_handleAdError(e){const t=e.getError?e.getError().toString():String(e);console.error("AdSdk: Error -",t),this.errorListeners.forEach((e=>e(t)))}}class p extends Phaser.Scene{constructor(){super("GameScene")}init(){this.gameOverPopup=new o(this),this.quitPopup=new l(this),this.instructionPopup=new d(this),this.scoreClassObj=new g(this),this.tweenKnifePos=0}preload(){}create(){if(this.adSdk=new u({gameId:9443,zoneId:2050,accountId:8837,injectionElementId:"applixir-ad-container"}),console.log("ad sdk: ",this.adSdk),this.adSdk.onStatus((e=>{console.log("Main: Ad Status =>",e)})),this.adSdk.onError((e=>{console.error("Main: Ad Error =>",e)})),h.GamePlayStarted(),t.gameStartTime=Date.now(),t.activeScene="game",this.game.events.on("resize",this.resize,this),this.isGameOver=!1,this.canThrow=!0,this.currentRotationSpeed=t.gameOptions.rotationSpeed,this.newRotationSpeed=t.gameOptions.rotationSpeed,this.score=0,this.knifeCounter=0,this.knifeBasketArray=[],this.knifeStandKnifeArray=[],this.standKnifePos=[{x:Math.round(t.game.config.width/10.3),y:Math.round(t.game.config.height/1.11)},{x:Math.round(t.game.config.width/6.53),y:Math.round(t.game.config.height/1.123)},{x:Math.round(t.game.config.width/5.11),y:Math.round(t.game.config.height/1.132)},{x:Math.round(t.game.config.width/4.14),y:Math.round(t.game.config.height/1.1252)},{x:Math.round(t.game.config.width/3.42),y:Math.round(t.game.config.height/1.113)},{x:Math.round(t.game.config.width/1.421),y:Math.round(t.game.config.height/1.11)},{x:Math.round(t.game.config.width/1.322),y:Math.round(t.game.config.height/1.123)},{x:Math.round(t.game.config.width/1.247),y:Math.round(t.game.config.height/1.132)},{x:Math.round(t.game.config.width/1.178),y:Math.round(t.game.config.height/1.1252)},{x:Math.round(t.game.config.width/1.116),y:Math.round(t.game.config.height/1.113)}],this.standKnifeAngle=[-17,-11,0,11,17,-17,-11,0,11,17],this.woodXpos=[Math.round(t.game.config.width/2)-100,Math.round(t.game.config.width/2)-50,Math.round(t.game.config.width/2),Math.round(t.game.config.width/2)+50,Math.round(t.game.config.width/2)+100],this.woodRotation=[25,23,18,21,24],this.woodSpeed=[1e3,930,900,970,950],this.woodFiveArray=[],this.woodArray=[],this.woodCounter=0,this.CreateTopItem(),this.knifeGroup=this.add.group(),this.obstacleGroup=this.add.group(),this.CreateKnife(),this.CreateTarget(),this.CreateObstcle(),this.CreateWoodenPiece(),this.CreateKnifeBasket(),this.CreateKnifeStand(),this.CreateUserInput(),this.CreateTimerEvent(),i.PlayBgMusic(),this.instructionPopup.CreateInstructionPopup(),Math.round(t.game.config.width-100),t.timeToEnd,window.innerWidth>=window.innerHeight/1.7777777){let e=window.innerHeight,t=e/1.77777777778;this.resize(t,e,window.innerWidth/2-t/2)}else{let e=window.innerWidth,t=window.innerHeight;this.resize(e,t,0)}}CreateTimer(){this.TimedEvent=this.time.addEvent({delay:1e3,callback:this.UpdateTime,callbackScope:this,loop:!0})}UpdateTime(){t.timeToEnd>0&&(t.timeToEnd--,this.DisplayTimeFormat(t.timeToEnd))}DisplayTimeFormat(e){let t=parseInt(e/60,10),i=parseInt(e%60,10);t=t<10?"0"+t:t,i=i<10?"0"+i:i}CallTheScoreSendAPI(){try{if("Android"==getMobileOperatingSystem())sendMessage("The Game End.................................."),sendMessage(this.score.toString());else if("iOS"==getMobileOperatingSystem()){let e={score:this.score.toString()},t=JSON.stringify(e);window.webkit.messageHandlers.jsHandler.postMessage(t),window.webkit.messageHandlers.jsHandler.postMessage("The Game End.............")}}catch(e){console.log("err: ",e)}i.StopBgMusic(),null!=this.TimedEvent&&this.TimedEvent.remove(),this.gameOverPopup.ShowGameOverPopup(this.score),t.timeToEnd=e.timerValue,this.canThrow=!1,this.isGameOver=!0,this.gameplayBg.disableInteractive()}CreateTopItem(){this.gameplayBg=this.add.image(0,0,"gameplay_bg").setOrigin(0),this.scoreText=this.add.text(0,0,t.score,{fontFamily:"Poppins_Bold",fontSize:"90px",fill:"#fff",fontStyle:"bold",align:"center"}),this.backButton=this.add.image(0,0,"back_button").setOrigin(.5),this.backButton.setInteractive({useHandCursor:!0}),this.backButton.on("pointerdown",this.BackButtonPressed,this),this.backButton.on("pointerup",this.BackButtonReleased,this),this.soundButton=this.add.image(0,0,"sound_on").setOrigin(.5),this.soundButton.setInteractive({useHandCursor:!0}),this.soundButton.on("pointerdown",this.SoundButtonPressed,this),this.soundButton.on("pointerup",this.SoundButtonReleased,this),this.DefaultSoundButton()}BackButtonPressed(){let e=s.getScale(1080,1920,window.innerWidth,window.innerHeight);s.ButtonScaleTween(this,this.backButton,e),i.PlayButtonClickSound()}BackButtonReleased(){setTimeout((()=>{this.quitPopup.ShowQuitPopup()}),100)}SoundButtonPressed(){let e=s.getScale(1080,1920,window.innerWidth,window.innerHeight);s.ButtonScaleTween(this,this.soundButton,e),i.PlayButtonClickSound()}SoundButtonReleased(){this.ToggleSoundButton()}DefaultSoundButton(){null==localStorage.getItem("hit_it_right_is_sound_on")&&localStorage.setItem("hit_it_right_is_sound_on",1),1==localStorage.getItem("hit_it_right_is_sound_on")?this.soundButton.setTexture("sound_on"):this.soundButton.setTexture("sound_off")}ToggleSoundButton(){1==localStorage.getItem("hit_it_right_is_sound_on")?(localStorage.setItem("hit_it_right_is_sound_on",0),this.soundButton.setTexture("sound_off"),i.PlayButtonClickSound(),i.StopBgMusic()):(localStorage.setItem("hit_it_right_is_sound_on",1),this.soundButton.setTexture("sound_on"),i.PlayBgMusic())}CreateUserInput(){this.gameplayBg.setInteractive(),this.gameplayBg.on("pointerdown",this.ThrowKnife,this)}GetRandomNumber(e,t){return Math.floor(Math.random()*(t-e)+e)}CreateTarget(){null!=this.target&&this.target.destroy(),this.target=this.add.sprite(0,0,"target"),this.target.depth=1,this.target.setAlpha(0),this.anims.create({key:"hit_target",frameRate:30,frames:this.anims.generateFrameNumbers("target",{start:1,end:10})}),this.targetBreak=this.add.sprite(0,0,"target_break"),this.targetBreak.depth=1,this.targetBreak.setVisible(!1),this.anims.create({key:"break_target",frameRate:20,frames:this.anims.generateFrameNumbers("target_break",{start:0,end:14})}),this.tweens.add({targets:[this.target],alpha:1,duration:300})}RotateTheTarget(e,t){this.target.angle+=this.currentRotationSpeed,this.currentRotationSpeed=Phaser.Math.Linear(this.currentRotationSpeed,this.newRotationSpeed,t/1e3)}CreateTimerEvent(){this.time.addEvent({delay:t.gameOptions.changeTime,callback:this.ChangeRotationSpeed,callbackScope:this,loop:!0})}ChangeRotationSpeed(){let e=0==Phaser.Math.Between(0,1)?-1:1,i=Phaser.Math.FloatBetween(-t.gameOptions.rotationVariation,t.gameOptions.rotationVariation);this.newRotationSpeed=(this.currentRotationSpeed+i)*e,this.newRotationSpeed=Phaser.Math.Clamp(this.newRotationSpeed,-t.gameOptions.maxRotationSpeed,t.gameOptions.maxRotationSpeed)}CreateKnife(){this.knife=this.add.image(0,0,"knife").setOrigin(.5),setTimeout((()=>{}),200)}CreateKnifeAnimation(){s.getScale(1080,1920,window.innerWidth,window.innerHeight),this.tweens.add({targets:[this.knife],y:this.knife.y-this.tweenKnifePos,duration:500,callbackScope:this,yoyo:!0,repeat:-1,delay:50,onUpdate:e=>{},onComplete:function(e){}})}ThrowKnife(){this.canThrow&&(this.canThrow=!1,this.tweens.add({targets:[this.knife],y:this.target.y+10,duration:t.gameOptions.throwSpeed,callbackScope:this,onComplete:function(e){let a=!0,n=this.knifeGroup.getChildren();for(let e=0;e<n.length;e++)if(Math.abs(Phaser.Math.Angle.ShortestBetween(this.target.angle,n[e].impactAngle))<t.gameOptions.minAngle){a=!1,this.isGameOver=!0;break}let o=this.obstacleGroup.getChildren();for(let e=0;e<o.length;e++)if(Math.abs(Phaser.Math.Angle.ShortestBetween(this.target.angle,180-o[e].startAngle))<t.gameOptions.minAngle&&!o[e].hit){a=!1,this.isGameOver=!0;break}if(this.DisableKnifeFromBasket(),a){let e,t;i.PlayKnifeAttachSound(),this.SelectAndFallFiveWoodenPiece(),this.target.play("hit_target"),this.canThrow=!0,window.innerWidth>=window.innerHeight/1.7777777?(e=window.innerHeight,t=e/1.77777777778):(t=window.innerWidth,e=window.innerHeight);let a=s.getScale(1080,1920,t,e),n=this.add.sprite(this.knife.x,this.target.y,"knife");n.setScale(a),n.impactAngle=this.target.angle,this.knifeGroup.add(n),this.IncrementScore(),this.knife.setScale(a),this.knife.setPosition(t/2,e-450*a)}else i.PlayObstacleCollideSound(),this.canThrow=!1,this.gameplayBg.disableInteractive(),this.tweens.add({targets:[this.knife],y:t.game.config.height+this.knife.height,rotation:5,duration:4*t.gameOptions.throwSpeed,callbackScope:this,onComplete:function(e){i.StopBgMusic(),this.knife.destroy(),setTimeout((()=>{const e=Date.now()-t.gameStartTime;h.GameScoreUpdate(e/1e3,this.score),this.gameOverPopup.ShowGameOverPopup(this.score),this.adSdk.showAd()}),100)}})}}))}IncrementScore(){this.score++,this.scoreText.text=this.score}RotateTheKnifeWithTarget(){let e=s.getScale(1080,1920,window.innerWidth,window.innerHeight),t=this.knifeGroup.getChildren();for(let i=0;i<t.length;i++){t[i].angle+=this.currentRotationSpeed;let s=Phaser.Math.DegToRad(t[i].angle+90);t[i].x=this.target.x+this.target.width/2*e*Math.cos(s),t[i].y=this.target.y+this.target.width/2*e*Math.sin(s)}}CreateObstcle(){if(this.score>9){let e=this.GetRandomNumber(1,4);for(let t=0;t<e;t++){let e;e=0==this.GetRandomNumber(0,2)?"obstacle_0":"obstacle_1";let t,i,a=Phaser.Math.Between(0,360);Phaser.Math.DegToRad(a-90),this.obstacle=this.add.sprite(0,0,e),window.innerWidth>=window.innerHeight/1.7777777?(t=window.innerHeight,i=t/1.77777777778):(i=window.innerWidth,t=window.innerHeight);let n=s.getScale(1080,1920,i,t);this.obstacle.setScale(n),this.obstacle.flipY=!0,this.obstacle.setOrigin(.5,1),this.obstacle.angle=a,this.obstacle.startAngle=a,this.obstacle.hit=!1,this.obstacleGroup.add(this.obstacle)}}}RotateTheObstacleWithTarget(){let e=s.getScale(1080,1920,window.innerWidth,window.innerHeight);for(let t=0;t<this.obstacleGroup.getChildren().length;t++)if(!this.obstacleGroup.children.entries[t].hit){this.obstacleGroup.children.entries[t].angle+=this.currentRotationSpeed;let i=Phaser.Math.DegToRad(this.obstacleGroup.children.entries[t].angle-90);"obstacle_0"==this.obstacleGroup.children.entries[t].texture.key?(this.obstacleGroup.children.entries[t].x=this.target.x+this.target.width/3*e*Math.cos(i),this.obstacleGroup.children.entries[t].y=this.target.y+this.target.width/3*e*Math.sin(i)):(this.obstacleGroup.children.entries[t].x=this.target.x+this.target.width/4*e*Math.cos(i),this.obstacleGroup.children.entries[t].y=this.target.y+this.target.width/4*e*Math.sin(i))}}CreateKnifeStand(){null!=this.knifeStand&&this.knifeStand.destroy(),this.knifeStand=this.add.image(0,0,"knife_stand").setOrigin(0,.5);for(let e=0;e<10;e++){let e=this.add.image(0,0,"knife_stand_knife_base").setOrigin(.5);this.knifeStandKnifeArray.push(e)}}CreateKnifeBasket(){for(let e=0;e<10;e++){let e=this.add.image(0,0,"stand_knife").setOrigin(.5);e.setAlpha(1),this.knifeBasketArray.push(e)}}AnimCom(){this.target.destroy(),this.obstacleGroup.clear(!0),this.obstacleGroup&&0!=this.obstacleGroup.children.entries.length&&this.obstacleGroup.clear(!0),this.knifeCounter=0,this.knifeBasketArray=[],this.knifeGroup.clear(!0),this.woodCounter=0,setTimeout((()=>{if(this.CreateKnifeBasket(),this.CreateTarget(),this.CreateObstcle(),window.innerWidth>=window.innerHeight/1.7777777){let e=window.innerHeight,t=e/1.77777777778;this.resize(t,e,window.innerWidth/2-t/2)}else{let e=window.innerWidth,t=window.innerHeight;this.resize(e,t,0)}this.gameplayBg.setInteractive()}),500)}DisableKnifeFromBasket(){for(let e=0;e<this.knifeBasketArray.length;e++)this.knifeCounter<10&&this.knifeBasketArray[this.knifeCounter].destroy();this.knifeCounter++,this.knifeCounter>=10&&(this.gameplayBg.disableInteractive(),this.isGameOver||(setTimeout((()=>{this.target.setVisible(!1);for(let e=0;e<this.knifeGroup.length;e++)this.knifeGroup[e].setVisible(!1);this.knifeGroup.clear(!0)}),100),setTimeout((()=>{this.targetBreak.setVisible(!0),this.targetBreak.play("break_target"),this.targetBreak.on("animationcomplete",this.AnimCom,this)}),200)))}CreateWoodenPiece(){for(let e=0;e<20;e++){let e=this.GetRandomNumber(0,3),i=this.add.sprite(Math.round(t.game.config.width/2),Math.round(t.game.config.height/2.75),"shape_"+e).setScale(t.scaleFactor,t.scaleFactor);i.setAlpha(0),this.woodArray.push(i)}}SelectAndFallFiveWoodenPiece(){if(console.log("this.woodCounter: ",this.woodCounter),this.woodFiveArray=[],this.woodCounter==this.woodArray.length&&(this.woodCounter=0),this.woodCounter<this.woodArray.length)for(let e=0;e<5;e++)this.woodFiveArray.push(this.woodArray[this.woodCounter]),this.woodCounter++;this.FallWoodenPiece()}FallWoodenPiece(){for(let e=0;e<this.woodFiveArray.length;e++)this.woodFiveArray[e].setAlpha(1),this.tweens.add({targets:this.woodFiveArray[e],x:this.woodXpos[e],y:Math.round(t.game.config.height/1.3),rotation:this.woodRotation[e],alpha:0,ease:"Sine.easeInOut",duration:this.woodSpeed[e],callbackScope:this,onComplete:this.TweenOnComplete})}TweenOnComplete(e,i,s){i[0].setPosition(Math.round(t.game.config.width/2),Math.round(t.game.config.height/2.75))}update(e,t){this.isGameOver||(this.RotateTheTarget(e,t),this.RotateTheKnifeWithTarget(),this.RotateTheObstacleWithTarget())}resize(e,i,a){if("game"!=t.activeScene)return;let n=s.getScale(1080,1920,e,i);const o=this.cameras.main;o.x=a,o.setViewport(a,0,e,i),this.gameplayBg.setDisplaySize(e,i),this.scoreText.setScale(n),this.scoreText.setPosition(e/2-20*n,50*n),this.backButton.setScale(n),this.backButton.setPosition(e/2-440*n,85*n),this.soundButton.setScale(n),this.soundButton.setPosition(e/2+440*n,90*n),this.knifeStand.setScale(n),this.knifeStand.setPosition(e/2-425*n,i-200*n),this.tweenKnifePos=20*n;for(let e=0;e<this.knifeStandKnifeArray.length;e++){const t=this.knifeStandKnifeArray[e];t.setScale(n),t.setPosition(this.knifeStand.x+100*n+e*(70*n),this.knifeStand.y)}for(let e=0;e<this.knifeBasketArray.length;e++){const t=this.knifeBasketArray[e];t.setScale(n),t.setPosition(this.knifeStand.x+100*n+e*(70*n),this.knifeStand.y)}this.target.setScale(n),this.targetBreak.setScale(n),this.target.setPosition(e/2,450*n),this.targetBreak.setPosition(e/2,450*n),this.knife.setScale(n),this.knife.setPosition(e/2,i-450*n),this.instructionPopup.Resize(e,i,a),this.gameOverPopup.Resize(e,i,a),this.quitPopup.Resize(e,i,a)}ScaleObstacleGroup(){window.innerWidth>=window.innerHeight/1.7777777||window.innerWidth,window.innerHeight;let e=s.getScale(1080,1920,clientWidth,clientHeight);for(let t=0;t<this.obstacleGroup.length;t++)this.obstacleGroup[t].setScale(e)}}class m extends Phaser.Scene{constructor(){super("GameErrorScene"),this.errorMessage="Sorry ! Timer value not found..."}preload(){this.load.image("error_logo","assets/images/error_logo.png")}create(){t.activeScene="game-error",this.game.events.on("resize",this.resize,this),this.add.image(Math.round(t.game.config.width/2),Math.round(t.game.config.height/4),"error_logo").setOrigin(.5).setScale(t.scaleFactor);let e={fontFamily:"Poppins_Bold",fontSize:"65px",fill:"#fff",fontStyle:"bold",align:"center",wordWrap:{width:Math.round(t.game.config.width-100)}};this.add.text(Math.round(t.game.config.width/2),Math.round(t.game.config.height/2),this.errorMessage,e).setOrigin(.5,.5)}resize(e,i,s){t.activeScene}}class w{constructor(e){this.game=e,this.overlay=null,this.image=null,this.text=null,this.init()}init(){this.game.events.on("orientation",this.ApplyOrientation,this),this.overlay=document.createElement("div"),this.overlay.style.position="fixed",this.overlay.style.top=0,this.overlay.style.left=0,this.overlay.style.width="100%",this.overlay.style.height="100%",this.overlay.style.backgroundColor="rgba(255, 255, 255, 0.8)",this.overlay.style.display="none",this.overlay.style.zIndex=9999,document.body.appendChild(this.overlay),this.overlay.style.pointerEvents="auto",this.image=document.createElement("img"),this.image.src=document.getElementById("rotate-screen").src,this.image.style.position="absolute",this.image.style.width=this.game.config.width,this.image.style.height=this.game.config.height,this.image.style.objectFit="cover",this.image.style.top=0,this.image.style.left=0,this.image.style.cursor="pointer",this.overlay.appendChild(this.image),this.text=document.createElement("div"),this.text.innerText="Please rotate your screen to landscape mode",this.text.style.position="absolute",this.text.style.bottom="10px",this.text.style.left="50%",this.text.style.transform="translateX(-50%)",this.text.style.color="#fff",this.text.style.fontSize="20px",this.text.style.textAlign="center",this.overlay.appendChild(this.text),window.addEventListener("resize",(()=>this.checkOrientation())),this.checkOrientation()}checkOrientation(){console.log("this.game.config.width",this.game.config.width,this.game.config.height,window.innerWidth,window.innerHeight),t.isMobile=/iPhone|iPhoneX|iPod|iPad|BlackBerry|kindle|playbook|Windows Phone|Android/i.test(navigator.userAgent),window.innerHeight>window.innerWidth||!t.isMobile?(this.overlay.style.display="none",this.game.input.enabled=!0):(this.image.style.width="100%",this.image.style.height="100%",this.overlay.style.display="flex",this.game.input.enabled=!1)}ApplyOrientation(e){!e&&t.isMobile?(this.image.style.width="100%",this.image.style.height="100%",this.overlay.style.display="flex",this.game.input.enabled=!1):(this.overlay.style.display="none",this.game.input.enabled=!0,window.location.reload())}destroy(){window.removeEventListener("resize",this.checkOrientation),document.body.removeChild(this.overlay)}}let y=new a,S=new n,f=new p,P=new m;window.onload=function(){t.isMobile=/iPhone|iPhoneX|iPod|iPad|BlackBerry|kindle|playbook|Windows Phone|Android/i.test(navigator.userAgent);let e,i,s={type:Phaser.CANVAS,scale:{mode:Phaser.Scale.RESIZE,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{},pixelArt:!1,width:window.innerWidth,height:window.innerHeight,backgroundColor:0};t.game=new Phaser.Game(s),t.game.canvas.id="phaser-canvas",t.clientWidth=window.innerWidth,t.clientHeight=window.innerHeight,t.initialWidth=window.innerWidth,t.initialHeight=window.innerHeight,window.focus(),t.game.scene.add("PreloadScene",y),t.game.scene.add("TitleScene",S),t.game.scene.add("GameScene",f),t.game.scene.add("GameErrorScene",P),t.game.scene.start("PreloadScene"),t.game.events.once("ready",(()=>{e=new w(t.game)})),t.game.scale.on("orientationchange",(function(e){switch(e){case Phaser.Scale.PORTRAIT:i=!0,console.log("Switched to PORTRAIT"),t.game.events.emit("orientation",i);case Phaser.Scale.PORTRAIT_SECONDARY:i=!0,console.log("Switched to PORTRAIT_SECONDARY"),t.game.events.emit("orientation",i);break;case Phaser.Scale.LANDSCAPE:i=!1,console.log("Switched to LANDSCAPE"),t.game.events.emit("orientation",i);case Phaser.Scale.LANDSCAPE_SECONDARY:i=!1,console.log("Switched to LANDSCAPE_SECONDARY"),t.game.events.emit("orientation",i)}}))},window.addEventListener("resize",(function(){if(window.innerWidth>=window.innerHeight/1.7777777){let e=window.innerHeight,i=e/1.777777777777,s=window.innerWidth/2-i/2;t.game.events.emit("resize",i,e,s)}else{let e=window.innerWidth;t.clientWidth=e;let i=window.innerHeight;t.clientHeight=i;let s=0;t.game.events.emit("resize",e,i,s)}}),!1)})();